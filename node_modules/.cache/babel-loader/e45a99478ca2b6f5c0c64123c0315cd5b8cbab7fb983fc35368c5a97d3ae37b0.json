{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\emman\\\\EducStation\\\\src\\\\components\\\\admin\\\\HTMLPreview.jsx\",\n  _s = $RefreshSig$();\n// src/components/admin/HTMLPreview.jsx\nimport React, { useRef, useEffect, useState } from 'react';\nimport { colors, spacing, typography, shadows, borderRadius } from '../../styles/theme';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst HTMLPreview = ({\n  htmlContent\n}) => {\n  _s();\n  const iframeRef = useRef(null);\n  const [error, setError] = useState(null);\n  const [isLoading, setIsLoading] = useState(true);\n  useEffect(() => {\n    if (iframeRef.current) {\n      try {\n        setIsLoading(true);\n        setError(null);\n        const iframe = iframeRef.current;\n        const doc = iframe.contentDocument || iframe.contentWindow.document;\n\n        // Reset the document\n        doc.open();\n        doc.write(htmlContent);\n        doc.close();\n\n        // Adjust iframe height to match content\n        const adjustHeight = () => {\n          try {\n            const height = doc.documentElement.scrollHeight;\n            if (height && height < 580) {\n              // Mantenemos una altura mínima\n              iframe.style.height = `${height}px`;\n            } else {\n              iframe.style.height = '580px'; // Altura consistente con textarea\n            }\n          } catch (error) {\n            console.error(\"Error adjusting iframe height:\", error);\n          }\n          setIsLoading(false);\n        };\n\n        // Add a base target to open links in new tab\n        try {\n          const baseEl = doc.createElement('base');\n          baseEl.target = '_blank';\n          doc.head.appendChild(baseEl);\n        } catch (error) {\n          console.error(\"Error setting base target:\", error);\n        }\n\n        // Add custom styles to improve preview experience\n        try {\n          const styleEl = doc.createElement('style');\n          styleEl.textContent = `\n            body {\n              font-family: 'Poppins', sans-serif;\n              line-height: 1.6;\n              color: #0b4444;\n              margin: 0 auto;\n              padding: 0;\n              max-width: 100%;\n              overflow-x: hidden;\n              background-color: #f9fafb; /* Concordancia con el fondo del textarea */\n            }\n            \n            /* Para cuando el HTML no incluye estilos propios */\n            a {\n              color: #0b4444;\n              text-decoration: underline;\n            }\n            \n            img {\n              max-width: 100%;\n              height: auto;\n            }\n            \n            pre, code {\n              background-color: #f5f5f5;\n              padding: 2px 4px;\n              border-radius: 4px;\n              font-family: monospace;\n            }\n            \n            blockquote {\n              border-left: 4px solid #d2b99a;\n              padding-left: 16px;\n              margin-left: 0;\n              color: #4c7977;\n            }\n            \n            h1, h2, h3, h4, h5, h6 {\n              color: #0b4444;\n              margin-top: 24px;\n              margin-bottom: 16px;\n            }\n            \n            table {\n              border-collapse: collapse;\n              width: 100%;\n              margin: 16px 0;\n            }\n            \n            table, th, td {\n              border: 1px solid #d2b99a;\n            }\n            \n            th, td {\n              padding: 8px;\n              text-align: left;\n            }\n            \n            th {\n              background-color: #f0f8f7;\n            }\n          `;\n          doc.head.appendChild(styleEl);\n        } catch (error) {\n          console.error(\"Error adding styles:\", error);\n        }\n\n        // Add onload event to iframe to adjust height after content loads\n        iframe.onload = adjustHeight;\n\n        // Also try to adjust immediately\n        adjustHeight();\n      } catch (error) {\n        setError(\"Error al renderizar HTML: \" + error.message);\n        setIsLoading(false);\n      }\n    }\n  }, [htmlContent]);\n  const styles = {\n    container: {\n      position: \"relative\",\n      height: \"100%\",\n      width: \"100%\"\n    },\n    previewContainer: {\n      width: \"100%\",\n      minHeight: \"580px\",\n      // Misma altura que textarea\n      border: \"none\",\n      overflow: \"auto\",\n      backgroundColor: \"#f9fafb\",\n      // Concordancia con el fondo del textarea\n      borderRadius: borderRadius.md\n    },\n    errorMessage: {\n      padding: spacing.md,\n      color: colors.error,\n      backgroundColor: `${colors.error}10`,\n      borderRadius: borderRadius.md,\n      fontSize: typography.fontSize.sm,\n      marginBottom: spacing.md\n    },\n    loadingOverlay: {\n      position: \"absolute\",\n      top: 0,\n      left: 0,\n      width: \"100%\",\n      height: \"100%\",\n      backgroundColor: \"rgba(255, 255, 255, 0.8)\",\n      display: \"flex\",\n      justifyContent: \"center\",\n      alignItems: \"center\",\n      zIndex: 10,\n      borderRadius: borderRadius.md\n    },\n    infoBox: {\n      backgroundColor: 'rgba(11, 68, 68, 0.05)',\n      borderRadius: borderRadius.md,\n      padding: spacing.sm,\n      marginTop: spacing.md,\n      fontSize: typography.fontSize.sm,\n      color: colors.textSecondary,\n      textAlign: \"center\"\n    }\n  };\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    style: styles.container,\n    children: [error && /*#__PURE__*/_jsxDEV(\"div\", {\n      style: styles.errorMessage,\n      children: error\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 181,\n      columnNumber: 9\n    }, this), /*#__PURE__*/_jsxDEV(\"iframe\", {\n      ref: iframeRef,\n      style: styles.previewContainer,\n      title: \"HTML Preview\",\n      sandbox: \"allow-same-origin allow-scripts\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 186,\n      columnNumber: 7\n    }, this), isLoading && /*#__PURE__*/_jsxDEV(\"div\", {\n      style: styles.loadingOverlay,\n      children: \"Cargando vista previa...\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 194,\n      columnNumber: 9\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      style: styles.infoBox,\n      children: \"Vista previa segura (sandbox) \\u2022 Los enlaces se abrir\\xE1n en una nueva pesta\\xF1a\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 199,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 179,\n    columnNumber: 5\n  }, this);\n};\n_s(HTMLPreview, \"p2kzLHjMSP5nPwdtjXpDhFMUpkA=\");\n_c = HTMLPreview;\nexport default HTMLPreview;\nvar _c;\n$RefreshReg$(_c, \"HTMLPreview\");","map":{"version":3,"names":["React","useRef","useEffect","useState","colors","spacing","typography","shadows","borderRadius","jsxDEV","_jsxDEV","HTMLPreview","htmlContent","_s","iframeRef","error","setError","isLoading","setIsLoading","current","iframe","doc","contentDocument","contentWindow","document","open","write","close","adjustHeight","height","documentElement","scrollHeight","style","console","baseEl","createElement","target","head","appendChild","styleEl","textContent","onload","message","styles","container","position","width","previewContainer","minHeight","border","overflow","backgroundColor","md","errorMessage","padding","color","fontSize","sm","marginBottom","loadingOverlay","top","left","display","justifyContent","alignItems","zIndex","infoBox","marginTop","textSecondary","textAlign","children","fileName","_jsxFileName","lineNumber","columnNumber","ref","title","sandbox","_c","$RefreshReg$"],"sources":["C:/Users/emman/EducStation/src/components/admin/HTMLPreview.jsx"],"sourcesContent":["\r\n// src/components/admin/HTMLPreview.jsx\r\nimport React, { useRef, useEffect, useState } from 'react';\r\nimport { colors, spacing, typography, shadows, borderRadius } from '../../styles/theme';\r\n\r\nconst HTMLPreview = ({ htmlContent }) => {\r\n  const iframeRef = useRef(null);\r\n  const [error, setError] = useState(null);\r\n  const [isLoading, setIsLoading] = useState(true);\r\n\r\n  useEffect(() => {\r\n    if (iframeRef.current) {\r\n      try {\r\n        setIsLoading(true);\r\n        setError(null);\r\n        \r\n        const iframe = iframeRef.current;\r\n        const doc = iframe.contentDocument || iframe.contentWindow.document;\r\n        \r\n        // Reset the document\r\n        doc.open();\r\n        doc.write(htmlContent);\r\n        doc.close();\r\n        \r\n        // Adjust iframe height to match content\r\n        const adjustHeight = () => {\r\n          try {\r\n            const height = doc.documentElement.scrollHeight;\r\n            if (height && height < 580) { // Mantenemos una altura mínima\r\n              iframe.style.height = `${height}px`;\r\n            } else {\r\n              iframe.style.height = '580px'; // Altura consistente con textarea\r\n            }\r\n          } catch (error) {\r\n            console.error(\"Error adjusting iframe height:\", error);\r\n          }\r\n          setIsLoading(false);\r\n        };\r\n        \r\n        // Add a base target to open links in new tab\r\n        try {\r\n          const baseEl = doc.createElement('base');\r\n          baseEl.target = '_blank';\r\n          doc.head.appendChild(baseEl);\r\n        } catch (error) {\r\n          console.error(\"Error setting base target:\", error);\r\n        }\r\n        \r\n        // Add custom styles to improve preview experience\r\n        try {\r\n          const styleEl = doc.createElement('style');\r\n          styleEl.textContent = `\r\n            body {\r\n              font-family: 'Poppins', sans-serif;\r\n              line-height: 1.6;\r\n              color: #0b4444;\r\n              margin: 0 auto;\r\n              padding: 0;\r\n              max-width: 100%;\r\n              overflow-x: hidden;\r\n              background-color: #f9fafb; /* Concordancia con el fondo del textarea */\r\n            }\r\n            \r\n            /* Para cuando el HTML no incluye estilos propios */\r\n            a {\r\n              color: #0b4444;\r\n              text-decoration: underline;\r\n            }\r\n            \r\n            img {\r\n              max-width: 100%;\r\n              height: auto;\r\n            }\r\n            \r\n            pre, code {\r\n              background-color: #f5f5f5;\r\n              padding: 2px 4px;\r\n              border-radius: 4px;\r\n              font-family: monospace;\r\n            }\r\n            \r\n            blockquote {\r\n              border-left: 4px solid #d2b99a;\r\n              padding-left: 16px;\r\n              margin-left: 0;\r\n              color: #4c7977;\r\n            }\r\n            \r\n            h1, h2, h3, h4, h5, h6 {\r\n              color: #0b4444;\r\n              margin-top: 24px;\r\n              margin-bottom: 16px;\r\n            }\r\n            \r\n            table {\r\n              border-collapse: collapse;\r\n              width: 100%;\r\n              margin: 16px 0;\r\n            }\r\n            \r\n            table, th, td {\r\n              border: 1px solid #d2b99a;\r\n            }\r\n            \r\n            th, td {\r\n              padding: 8px;\r\n              text-align: left;\r\n            }\r\n            \r\n            th {\r\n              background-color: #f0f8f7;\r\n            }\r\n          `;\r\n          doc.head.appendChild(styleEl);\r\n        } catch (error) {\r\n          console.error(\"Error adding styles:\", error);\r\n        }\r\n        \r\n        // Add onload event to iframe to adjust height after content loads\r\n        iframe.onload = adjustHeight;\r\n        \r\n        // Also try to adjust immediately\r\n        adjustHeight();\r\n        \r\n      } catch (error) {\r\n        setError(\"Error al renderizar HTML: \" + error.message);\r\n        setIsLoading(false);\r\n      }\r\n    }\r\n  }, [htmlContent]);\r\n\r\n  const styles = {\r\n    container: {\r\n      position: \"relative\",\r\n      height: \"100%\",\r\n      width: \"100%\"\r\n    },\r\n    previewContainer: {\r\n      width: \"100%\",\r\n      minHeight: \"580px\", // Misma altura que textarea\r\n      border: \"none\",\r\n      overflow: \"auto\",\r\n      backgroundColor: \"#f9fafb\", // Concordancia con el fondo del textarea\r\n      borderRadius: borderRadius.md\r\n    },\r\n    errorMessage: {\r\n      padding: spacing.md,\r\n      color: colors.error,\r\n      backgroundColor: `${colors.error}10`,\r\n      borderRadius: borderRadius.md,\r\n      fontSize: typography.fontSize.sm,\r\n      marginBottom: spacing.md\r\n    },\r\n    loadingOverlay: {\r\n      position: \"absolute\",\r\n      top: 0,\r\n      left: 0,\r\n      width: \"100%\",\r\n      height: \"100%\",\r\n      backgroundColor: \"rgba(255, 255, 255, 0.8)\",\r\n      display: \"flex\",\r\n      justifyContent: \"center\",\r\n      alignItems: \"center\",\r\n      zIndex: 10,\r\n      borderRadius: borderRadius.md\r\n    },\r\n    infoBox: {\r\n      backgroundColor: 'rgba(11, 68, 68, 0.05)',\r\n      borderRadius: borderRadius.md,\r\n      padding: spacing.sm,\r\n      marginTop: spacing.md,\r\n      fontSize: typography.fontSize.sm,\r\n      color: colors.textSecondary,\r\n      textAlign: \"center\"\r\n    }\r\n  };\r\n\r\n  return (\r\n    <div style={styles.container}>\r\n      {error && (\r\n        <div style={styles.errorMessage}>\r\n          {error}\r\n        </div>\r\n      )}\r\n      \r\n      <iframe \r\n        ref={iframeRef}\r\n        style={styles.previewContainer}\r\n        title=\"HTML Preview\"\r\n        sandbox=\"allow-same-origin allow-scripts\"\r\n      />\r\n      \r\n      {isLoading && (\r\n        <div style={styles.loadingOverlay}>\r\n          Cargando vista previa...\r\n        </div>\r\n      )}\r\n      \r\n      <div style={styles.infoBox}>\r\n        Vista previa segura (sandbox) • Los enlaces se abrirán en una nueva pestaña\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default HTMLPreview;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}